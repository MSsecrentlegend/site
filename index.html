<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Green Town</title>
</head>
<body>

    <header>
        <div class="logo">
            <img src="done.png" class="greenpng" alt="Green Town logo">
            <div class="logo-text">
                <h1>Green Town</h1>
                <h2>GENERAL CONSTRUCTION</h2>
            </div>
        </div>
        <button class="hamburger" aria-label="Toggle navigation" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav class="Navigation" id="main-nav">
                <a href="#home">Home</a>
                <a href="#about">About</a>
                <a href="#services">Services</a>
                <a href="#contact">Contact</a>
        </nav>
    </header>

    <!-- Main showcase with Join button and rotating gallery -->
    <main class="showcase">
      <div class="join-wrap">
        <div class="join-caption">YOUR DREAMS<br> COME TRUE</div>
        <button class="join-btn">JOIN US</button>
      </div>
      <div class="gallery-wrap">
        <div class="gallery">
          <div class="card" data-index="0"><img src="temppic1.jfif" alt="Picture 1"></div>
          <div class="card" data-index="1"><img src="temppic2.jfif" alt="Picture 2"></div>
          <div class="card" data-index="2"><img src="temppic3.jfif" alt="Picture 3"></div>
        </div>
      </div>
    </main>

    <section class="about-section" aria-labelledby="about-title">
      <div class="about-inner">
        <h2 id="about-title"><a href="#about" class="about-link">About Us</a></h2>
        <div class="about-lines">
          <p>to be added</p>
          <p>to be added</p>
          <p>to be added</p>
          <p>to be added</p>
        </div>
      </div>
    </section>

    <section class="services-section" id="services" aria-labelledby="services-title">
      <div class="section-inner">
        <h2 id="services-title">Services</h2>
        <div class="services-box">
          <div class="service-grid">
            <button class="service-btn"><img src="Roads and Asphalt.webp" alt="Roads & Asphalt" class="service-icon"><span class="service-label">Roads & Asphalt</span></button>
            <button class="service-btn"><img src="Readymix.webp" alt="Ready Mix" class="service-icon"><span class="service-label">Ready Mix</span></button>
            <button class="service-btn"><img src="Maintenance.webp" alt="Maintenance" class="service-icon"><span class="service-label">Maintenance</span></button>
            <button class="service-btn"><img src="Landscaping.webp" alt="Landscaping" class="service-icon"><span class="service-label">Landscaping</span></button>
            <button class="service-btn"><img src="Infrastructure.webp" alt="Infrastructure" class="service-icon"><span class="service-label">Infrastructure</span></button>
            <button class="service-btn"><img src="Excavation And Filling.webp" alt="Excavation & Filling" class="service-icon"><span class="service-label">Excavation & Filling</span></button>
            <button class="service-btn"><img src="Civil drainage.webp" alt="Civil Drainage" class="service-icon"><span class="service-label">Civil Drainage</span></button>
            <button class="service-btn"><img src="best.png" alt="Materials & Supply" class="service-icon"><span class="service-label">Materials & Supply</span></button>
          </div>
        </div>
      </div>
    </section>

    <!-- Duplicate of About section (same layout) using temppic5.jfif -->
    <section class="about-section alt" aria-labelledby="vision-title">
      <div class="about-inner">
        <h2 id="vision-title"><a href="#vision" class="about-link">Our Vision</a></h2>
        <div class="about-lines">
          <p>to be added</p>
          <p>to be added</p>
          <p>to be added</p>
          <p>to be added</p>
        </div>
      </div>
    </section>

    <script>
    const hamburger = document.querySelector('.hamburger');
    const nav = document.querySelector('.Navigation');
    const navLinks = nav.querySelectorAll('a');

    function toggleNav(open) {
      const isOpen = typeof open === 'boolean' ? open : !hamburger.classList.contains('is-active');
      hamburger.classList.toggle('is-active', isOpen);
      nav.classList.toggle('is-active', isOpen);
      hamburger.setAttribute('aria-expanded', String(isOpen));
      // ensure header stays expanded while nav is open
      if(isOpen){ document.body.classList.remove('header-compact'); }
    }

    hamburger.addEventListener('click', () => toggleNav());

    // close when a nav link is clicked
    navLinks.forEach(link => link.addEventListener('click', () => toggleNav(false)));

    // close on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') toggleNav(false);
    });

    // Gallery carousel logic
    (function(){
      const cards = Array.from(document.querySelectorAll('.gallery .card'));
      const galleryEl = document.querySelector('.gallery');
      let current = 0;
      let interval = null;
      let clickLocked = false; // short debounce for clicks
      let resumeTimeout = null; // timer to resume auto-rotate after user interaction
      const CLICK_COOLDOWN = 700; // ms between allowed clicks
      const PAUSE_AFTER_INTERACTION = 5000; // ms to pause auto-rotate after manual interaction

      function show(index){
        cards.forEach((c)=> c.classList.remove('active','left','right'));
        const len = cards.length;
        const prevIndex = (index - 1 + len) % len;
        const nextIndex = (index + 1) % len;
        cards[index].classList.add('active');
        cards[prevIndex].classList.add('left');
        cards[nextIndex].classList.add('right');
      }

      function next(){ current = (current + 1) % cards.length; show(current); }
      function prev(){ current = (current - 1 + cards.length) % cards.length; show(current); }

      // click to switch (with short cooldown); also pause auto-rotate for a short time after manual clicks
      cards.forEach((card, i)=>{
        card.addEventListener('click', ()=>{
          if (clickLocked) return;
          clickLocked = true;
          current = i;
          show(current);
          setTimeout(()=> { clickLocked = false; }, CLICK_COOLDOWN);

          // pause auto-rotate and schedule resume
          stop();
          if (resumeTimeout) clearTimeout(resumeTimeout);
          resumeTimeout = setTimeout(()=>{ start(); resumeTimeout = null; }, PAUSE_AFTER_INTERACTION);
        });
      });

      // pause while hovering the gallery area
      galleryEl.addEventListener('mouseenter', stop);
      galleryEl.addEventListener('mouseleave', start);

      function start(){ if(interval) return; interval = setInterval(next, 3000); }
      function stop(){ clearInterval(interval); interval = null; }

      show(current);
      start();
    })();

    // Collapse header to logo-only when scrolling down; restore on scroll up
    (function(){
      const headerEl = document.querySelector('header');
      const navPanel = document.querySelector('.Navigation');
      let lastY = window.scrollY;
      let ticking = false;

      window.addEventListener('scroll', () => {
        const y = window.scrollY;
        if (!ticking) {
          window.requestAnimationFrame(() => {
            // keep header expanded while nav panel is open
            if (navPanel && navPanel.classList.contains('is-active')){
              headerEl.classList.remove('header--compact');
              document.body.classList.remove('header-compact');
            } else if (y > lastY && y > 100) {
              headerEl.classList.add('header--compact');
              document.body.classList.add('header-compact');
            } else {
              headerEl.classList.remove('header--compact');
              document.body.classList.remove('header-compact');
            }
            lastY = y;
            ticking = false;
          });
          ticking = true;
        }
      });
    })();

    </script>

</body>
</html>